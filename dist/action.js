
        import { fileURLToPath } from 'url';
        import { createRequire as topLevelCreateRequire } from 'module';
        import { dirname as pathDirname } from 'path';
        const require = topLevelCreateRequire(import.meta.url);
        const __filename = fileURLToPath(import.meta.url);
        const __dirname = pathDirname(__filename);
        
var Ur=Object.create;var ue=Object.defineProperty;var Mr=Object.getOwnPropertyDescriptor;var Dr=Object.getOwnPropertyNames;var qr=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(e&&(t=e(e=0)),t);var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ir=(e,t)=>{for(var r in t)ue(e,r,{get:t[r],enumerable:!0})},ht=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Dr(t))!Nr.call(e,s)&&s!==r&&ue(e,s,{get:()=>t[s],enumerable:!(n=Mr(t,s))||n.enumerable});return e};var Re=(e,t,r)=>(r=e!=null?Ur(qr(e)):{},ht(t||!e||!e.__esModule?ue(r,"default",{value:e,enumerable:!0}):r,e)),jr=e=>ht(ue({},"__esModule",{value:!0}),e);var fe=m(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.toCommandProperties=V.toCommandValue=void 0;function Fr(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}V.toCommandValue=Fr;function Br(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}V.toCommandProperties=Br});var xt=m(R=>{"use strict";var Wr=R&&R.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$r=R&&R.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kr=R&&R.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Wr(t,e,r);return $r(t,e),t};Object.defineProperty(R,"__esModule",{value:!0});R.issue=R.issueCommand=void 0;var Gr=kr(v("os")),mt=fe();function _t(e,t,r){let n=new Ae(e,t,r);process.stdout.write(n.toString()+Gr.EOL)}R.issueCommand=_t;function Hr(e,t=""){_t(e,{},t)}R.issue=Hr;var pt="::",Ae=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=pt+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let s=this.properties[n];s&&(r?r=!1:t+=",",t+=`${n}=${zr(s)}`)}}return t+=`${pt}${Vr(this.message)}`,t}};function Vr(e){return mt.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function zr(e){return mt.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import Jr from"crypto";function te(){return de>he.length-16&&(Jr.randomFillSync(he),de=0),he.slice(de,de+=16)}var he,de,Ce=b(()=>{he=new Uint8Array(256),de=he.length});var gt,vt=b(()=>{gt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Kr(e){return typeof e=="string"&&gt.test(e)}var N,re=b(()=>{vt();N=Kr});function Yr(e,t=0){let r=(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase();if(!N(r))throw TypeError("Stringified UUID is invalid");return r}var w,I,ne=b(()=>{re();w=[];for(let e=0;e<256;++e)w.push((e+256).toString(16).substr(1));I=Yr});function Qr(e,t,r){let n=t&&r||0,s=t||new Array(16);e=e||{};let i=e.node||wt,o=e.clockseq!==void 0?e.clockseq:Se;if(i==null||o==null){let h=e.random||(e.rng||te)();i==null&&(i=wt=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=Se=(h[6]<<8|h[7])&16383)}let l=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Pe+1,a=l-Le+(c-Pe)/1e4;if(a<0&&e.clockseq===void 0&&(o=o+1&16383),(a<0||l>Le)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Le=l,Pe=c,Se=o,l+=122192928e5;let u=((l&268435455)*1e4+c)%4294967296;s[n++]=u>>>24&255,s[n++]=u>>>16&255,s[n++]=u>>>8&255,s[n++]=u&255;let d=l/4294967296*1e4&268435455;s[n++]=d>>>8&255,s[n++]=d&255,s[n++]=d>>>24&15|16,s[n++]=d>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let h=0;h<6;++h)s[n+h]=i[h];return t||I(s)}var wt,Se,Le,Pe,bt,yt=b(()=>{Ce();ne();Le=0,Pe=0;bt=Qr});function Xr(e){if(!N(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var pe,Ue=b(()=>{re();pe=Xr});function Zr(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function me(e,t,r){function n(s,i,o,l){if(typeof s=="string"&&(s=Zr(s)),typeof i=="string"&&(i=pe(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){l=l||0;for(let a=0;a<16;++a)o[l+a]=c[a];return o}return I(c)}try{n.name=e}catch{}return n.DNS=en,n.URL=tn,n}var en,tn,Me=b(()=>{ne();Ue();en="6ba7b810-9dad-11d1-80b4-00c04fd430c8",tn="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import rn from"crypto";function nn(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),rn.createHash("md5").update(e).digest()}var Ot,Et=b(()=>{Ot=nn});var sn,Tt,Rt=b(()=>{Me();Et();sn=me("v3",48,Ot),Tt=sn});function on(e,t,r){e=e||{};let n=e.random||(e.rng||te)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=n[s];return t}return I(n)}var At,Ct=b(()=>{Ce();ne();At=on});import an from"crypto";function ln(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),an.createHash("sha1").update(e).digest()}var St,Lt=b(()=>{St=ln});var cn,Pt,Ut=b(()=>{Me();Lt();cn=me("v5",80,St),Pt=cn});var Mt,Dt=b(()=>{Mt="00000000-0000-0000-0000-000000000000"});function un(e){if(!N(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var qt,Nt=b(()=>{re();qt=un});var It={};Ir(It,{NIL:()=>Mt,parse:()=>pe,stringify:()=>I,v1:()=>bt,v3:()=>Tt,v4:()=>At,v5:()=>Pt,validate:()=>N,version:()=>qt});var jt=b(()=>{yt();Rt();Ct();Ut();Dt();Nt();re();ne();Ue()});var $t=m(A=>{"use strict";var fn=A&&A.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dn=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Bt=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&fn(t,e,r);return dn(t,e),t};Object.defineProperty(A,"__esModule",{value:!0});A.prepareKeyValueMessage=A.issueFileCommand=void 0;var Ft=Bt(v("fs")),De=Bt(v("os")),hn=(jt(),jr(It)),Wt=fe();function pn(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Ft.existsSync(r))throw new Error(`Missing file at path: ${r}`);Ft.appendFileSync(r,`${Wt.toCommandValue(t)}${De.EOL}`,{encoding:"utf8"})}A.issueFileCommand=pn;function mn(e,t){let r=`ghadelimiter_${hn.v4()}`,n=Wt.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${De.EOL}${n}${De.EOL}${r}`}A.prepareKeyValueMessage=mn});var Gt=m(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.checkBypass=z.getProxyUrl=void 0;function _n(e){let t=e.protocol==="https:";if(kt(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)try{return new URL(r)}catch{if(!r.startsWith("http://")&&!r.startsWith("https://"))return new URL(`http://${r}`)}else return}z.getProxyUrl=_n;function kt(e){if(!e.hostname)return!1;let t=e.hostname;if(xn(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let s=[e.hostname.toUpperCase()];typeof n=="number"&&s.push(`${s[0]}:${n}`);for(let i of r.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(i==="*"||s.some(o=>o===i||o.endsWith(`.${i}`)||i.startsWith(".")&&o.endsWith(`${i}`)))return!0;return!1}z.checkBypass=kt;function xn(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Jt=m(J=>{"use strict";var fo=v("net"),gn=v("tls"),qe=v("http"),Ht=v("https"),vn=v("events"),ho=v("assert"),wn=v("util");J.httpOverHttp=bn;J.httpsOverHttp=yn;J.httpOverHttps=On;J.httpsOverHttps=En;function bn(e){var t=new D(e);return t.request=qe.request,t}function yn(e){var t=new D(e);return t.request=qe.request,t.createSocket=Vt,t.defaultPort=443,t}function On(e){var t=new D(e);return t.request=Ht.request,t}function En(e){var t=new D(e);return t.request=Ht.request,t.createSocket=Vt,t.defaultPort=443,t}function D(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||qe.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,s,i,o){for(var l=zt(s,i,o),c=0,a=t.requests.length;c<a;++c){var u=t.requests[c];if(u.host===l.host&&u.port===l.port){t.requests.splice(c,1),u.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}wn.inherits(D,vn.EventEmitter);D.prototype.addRequest=function(t,r,n,s){var i=this,o=Ne({request:t},i.options,zt(r,n,s));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,function(l){l.on("free",c),l.on("close",a),l.on("agentRemove",a),t.onSocket(l);function c(){i.emit("free",l,o)}function a(u){i.removeSocket(l),l.removeListener("free",c),l.removeListener("close",a),l.removeListener("agentRemove",a)}})};D.prototype.createSocket=function(t,r){var n=this,s={};n.sockets.push(s);var i=Ne({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),j("making CONNECT request");var o=n.request(i);o.useChunkedEncodingByDefault=!1,o.once("response",l),o.once("upgrade",c),o.once("connect",a),o.once("error",u),o.end();function l(d){d.upgrade=!0}function c(d,h,H){process.nextTick(function(){a(d,h,H)})}function a(d,h,H){if(o.removeAllListeners(),h.removeAllListeners(),d.statusCode!==200){j("tunneling socket could not be established, statusCode=%d",d.statusCode),h.destroy();var ee=new Error("tunneling socket could not be established, statusCode="+d.statusCode);ee.code="ECONNRESET",t.request.emit("error",ee),n.removeSocket(s);return}if(H.length>0){j("got illegal response body from proxy"),h.destroy();var ee=new Error("got illegal response body from proxy");ee.code="ECONNRESET",t.request.emit("error",ee),n.removeSocket(s);return}return j("tunneling connection has established"),n.sockets[n.sockets.indexOf(s)]=h,r(h)}function u(d){o.removeAllListeners(),j(`tunneling socket could not be established, cause=%s
`,d.message,d.stack);var h=new Error("tunneling socket could not be established, cause="+d.message);h.code="ECONNRESET",t.request.emit("error",h),n.removeSocket(s)}};D.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(s){n.request.onSocket(s)})}};function Vt(e,t){var r=this;D.prototype.createSocket.call(r,e,function(n){var s=e.request.getHeader("host"),i=Ne({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):e.host}),o=gn.connect(0,i);r.sockets[r.sockets.indexOf(n)]=o,t(o)})}function zt(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function Ne(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var s=Object.keys(n),i=0,o=s.length;i<o;++i){var l=s[i];n[l]!==void 0&&(e[l]=n[l])}}return e}var j;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?j=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:j=function(){};J.debug=j});var Yt=m((mo,Kt)=>{Kt.exports=Jt()});var Xt=m(p=>{"use strict";var Tn=p&&p.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rn=p&&p.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),be=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Tn(t,e,r);return Rn(t,e),t},x=p&&p.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});p.HttpClient=p.isHttps=p.HttpClientResponse=p.HttpClientError=p.getProxyUrl=p.MediaTypes=p.Headers=p.HttpCodes=void 0;var _e=be(v("http")),Ie=be(v("https")),Qt=be(Gt()),xe=be(Yt()),L;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(L=p.HttpCodes||(p.HttpCodes={}));var y;(function(e){e.Accept="accept",e.ContentType="content-type"})(y=p.Headers||(p.Headers={}));var F;(function(e){e.ApplicationJson="application/json"})(F=p.MediaTypes||(p.MediaTypes={}));function An(e){let t=Qt.getProxyUrl(new URL(e));return t?t.href:""}p.getProxyUrl=An;var Cn=[L.MovedPermanently,L.ResourceMoved,L.SeeOther,L.TemporaryRedirect,L.PermanentRedirect],Sn=[L.BadGateway,L.ServiceUnavailable,L.GatewayTimeout],Ln=["OPTIONS","GET","DELETE","HEAD"],Pn=10,Un=5,ve=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};p.HttpClientError=ve;var we=class{constructor(t){this.message=t}readBody(){return x(this,void 0,void 0,function*(){return new Promise(t=>x(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}readBodyBuffer(){return x(this,void 0,void 0,function*(){return new Promise(t=>x(this,void 0,void 0,function*(){let r=[];this.message.on("data",n=>{r.push(n)}),this.message.on("end",()=>{t(Buffer.concat(r))})}))})}};p.HttpClientResponse=we;function Mn(e){return new URL(e).protocol==="https:"}p.isHttps=Mn;var je=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return x(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return x(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return x(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return x(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return x(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return x(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return x(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,s){return x(this,void 0,void 0,function*(){return this.request(t,r,n,s)})}getJson(t,r={}){return x(this,void 0,void 0,function*(){r[y.Accept]=this._getExistingOrDefaultHeader(r,y.Accept,F.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return x(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,F.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,F.ApplicationJson);let i=yield this.post(t,s,n);return this._processResponse(i,this.requestOptions)})}putJson(t,r,n={}){return x(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,F.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,F.ApplicationJson);let i=yield this.put(t,s,n);return this._processResponse(i,this.requestOptions)})}patchJson(t,r,n={}){return x(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,F.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,F.ApplicationJson);let i=yield this.patch(t,s,n);return this._processResponse(i,this.requestOptions)})}request(t,r,n,s){return x(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),o=this._prepareRequest(t,i,s),l=this._allowRetries&&Ln.includes(t)?this._maxRetries+1:1,c=0,a;do{if(a=yield this.requestRaw(o,n),a&&a.message&&a.message.statusCode===L.Unauthorized){let d;for(let h of this.handlers)if(h.canHandleAuthentication(a)){d=h;break}return d?d.handleAuthentication(this,o,n):a}let u=this._maxRedirects;for(;a.message.statusCode&&Cn.includes(a.message.statusCode)&&this._allowRedirects&&u>0;){let d=a.message.headers.location;if(!d)break;let h=new URL(d);if(i.protocol==="https:"&&i.protocol!==h.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),h.hostname!==i.hostname)for(let H in s)H.toLowerCase()==="authorization"&&delete s[H];o=this._prepareRequest(t,h,s),a=yield this.requestRaw(o,n),u--}if(!a.message.statusCode||!Sn.includes(a.message.statusCode))return a;c+=1,c<l&&(yield a.readBody(),yield this._performExponentialBackoff(c))}while(c<l);return a})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return x(this,void 0,void 0,function*(){return new Promise((n,s)=>{function i(o,l){o?s(o):l?n(l):s(new Error("Unknown error"))}this.requestRawWithCallback(t,r,i)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1;function i(c,a){s||(s=!0,n(c,a))}let o=t.httpModule.request(t.options,c=>{let a=new we(c);i(void 0,a)}),l;o.on("socket",c=>{l=c}),o.setTimeout(this._socketTimeout||3*6e4,()=>{l&&l.end(),i(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(c){i(c)}),r&&typeof r=="string"&&o.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){o.end()}),r.pipe(o)):o.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let s={};s.parsedUrl=r;let i=s.parsedUrl.protocol==="https:";s.httpModule=i?Ie:_e;let o=i?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):o,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=t,s.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let l of this.handlers)l.prepareRequest(s.options);return s}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},ge(this.requestOptions.headers),ge(t||{})):ge(t||{})}_getExistingOrDefaultHeader(t,r,n){let s;return this.requestOptions&&this.requestOptions.headers&&(s=ge(this.requestOptions.headers)[r]),t[r]||s||n}_getAgent(t){let r,n=Qt.getProxyUrl(t),s=n&&n.hostname;if(this._keepAlive&&s&&(r=this._proxyAgent),this._keepAlive&&!s&&(r=this._agent),r)return r;let i=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||_e.globalAgent.maxSockets),n&&n.hostname){let l={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,a=n.protocol==="https:";i?c=a?xe.httpsOverHttps:xe.httpsOverHttp:c=a?xe.httpOverHttps:xe.httpOverHttp,r=c(l),this._proxyAgent=r}if(this._keepAlive&&!r){let l={keepAlive:this._keepAlive,maxSockets:o};r=i?new Ie.Agent(l):new _e.Agent(l),this._agent=r}return r||(r=i?Ie.globalAgent:_e.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return x(this,void 0,void 0,function*(){t=Math.min(Pn,t);let r=Un*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return x(this,void 0,void 0,function*(){return new Promise((n,s)=>x(this,void 0,void 0,function*(){let i=t.message.statusCode||0,o={statusCode:i,result:null,headers:{}};i===L.NotFound&&n(o);function l(u,d){if(typeof d=="string"){let h=new Date(d);if(!isNaN(h.valueOf()))return h}return d}let c,a;try{a=yield t.readBody(),a&&a.length>0&&(r&&r.deserializeDates?c=JSON.parse(a,l):c=JSON.parse(a),o.result=c),o.headers=t.message.headers}catch{}if(i>299){let u;c&&c.message?u=c.message:a&&a.length>0?u=a:u=`Failed request: (${i})`;let d=new ve(u,i);d.result=o.result,s(d)}else n(o)}))})}};p.HttpClient=je;var ge=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Zt=m(U=>{"use strict";var $e=U&&U.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(U,"__esModule",{value:!0});U.PersonalAccessTokenCredentialHandler=U.BearerCredentialHandler=U.BasicCredentialHandler=void 0;var Fe=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return $e(this,void 0,void 0,function*(){throw new Error("not implemented")})}};U.BasicCredentialHandler=Fe;var Be=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return $e(this,void 0,void 0,function*(){throw new Error("not implemented")})}};U.BearerCredentialHandler=Be;var We=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return $e(this,void 0,void 0,function*(){throw new Error("not implemented")})}};U.PersonalAccessTokenCredentialHandler=We});var rr=m(K=>{"use strict";var er=K&&K.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.OidcClient=void 0;var Dn=Xt(),qn=Zt(),tr=ye(),ke=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Dn.HttpClient("actions/oidc-client",[new qn.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return er(this,void 0,void 0,function*(){let i=(r=(yield e.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return er(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let s=encodeURIComponent(t);r=`${r}&audience=${s}`}tr.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return tr.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};K.OidcClient=ke});var ze=m(O=>{"use strict";var Ge=O&&O.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.summary=O.markdownSummary=O.SUMMARY_DOCS_URL=O.SUMMARY_ENV_VAR=void 0;var Nn=v("os"),He=v("fs"),{access:In,appendFile:jn,writeFile:Fn}=He.promises;O.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";O.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ve=class{constructor(){this._buffer=""}filePath(){return Ge(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[O.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${O.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield In(t,He.constants.R_OK|He.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let s=Object.entries(n).map(([i,o])=>` ${i}="${o}"`).join("");return r?`<${t}${s}>${r}</${t}>`:`<${t}${s}>`}write(t){return Ge(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?Fn:jn)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Ge(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Nn.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),s=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(s).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",s=t.map(o=>this.wrap("li",o)).join(""),i=this.wrap(n,s);return this.addRaw(i).addEOL()}addTable(t){let r=t.map(s=>{let i=s.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:l,data:c,colspan:a,rowspan:u}=o,d=l?"th":"td",h=Object.assign(Object.assign({},a&&{colspan:a}),u&&{rowspan:u});return this.wrap(d,c,h)}).join("");return this.wrap("tr",i)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:s,height:i}=n||{},o=Object.assign(Object.assign({},s&&{width:s}),i&&{height:i}),l=this.wrap("img",null,Object.assign({src:t,alt:r},o));return this.addRaw(l).addEOL()}addHeading(t,r){let n=`h${r}`,s=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",i=this.wrap(s,t);return this.addRaw(i).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),s=this.wrap("blockquote",t,n);return this.addRaw(s).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},nr=new Ve;O.markdownSummary=nr;O.summary=nr});var sr=m(E=>{"use strict";var Bn=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Wn=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$n=E&&E.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Bn(t,e,r);return Wn(t,e),t};Object.defineProperty(E,"__esModule",{value:!0});E.toPlatformPath=E.toWin32Path=E.toPosixPath=void 0;var kn=$n(v("path"));function Gn(e){return e.replace(/[\\]/g,"/")}E.toPosixPath=Gn;function Hn(e){return e.replace(/[/]/g,"\\")}E.toWin32Path=Hn;function Vn(e){return e.replace(/[/\\]/g,kn.sep)}E.toPlatformPath=Vn});var ye=m(f=>{"use strict";var zn=f&&f.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Jn=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ir=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&zn(t,e,r);return Jn(t,e),t},or=f&&f.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(f,"__esModule",{value:!0});f.getIDToken=f.getState=f.saveState=f.group=f.endGroup=f.startGroup=f.info=f.notice=f.warning=f.error=f.debug=f.isDebug=f.setFailed=f.setCommandEcho=f.setOutput=f.getBooleanInput=f.getMultilineInput=f.getInput=f.addPath=f.setSecret=f.exportVariable=f.ExitCode=void 0;var C=xt(),k=$t(),Y=fe(),ar=ir(v("os")),Kn=ir(v("path")),Yn=rr(),lr;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(lr=f.ExitCode||(f.ExitCode={}));function Qn(e,t){let r=Y.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return k.issueFileCommand("ENV",k.prepareKeyValueMessage(e,t));C.issueCommand("set-env",{name:e},r)}f.exportVariable=Qn;function Xn(e){C.issueCommand("add-mask",{},e)}f.setSecret=Xn;function Zn(e){process.env.GITHUB_PATH||""?k.issueFileCommand("PATH",e):C.issueCommand("add-path",{},e),process.env.PATH=`${e}${Kn.delimiter}${process.env.PATH}`}f.addPath=Zn;function Je(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}f.getInput=Je;function es(e,t){let r=Je(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}f.getMultilineInput=es;function ts(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],s=Je(e,t);if(r.includes(s))return!0;if(n.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}f.getBooleanInput=ts;function rs(e,t){if(process.env.GITHUB_OUTPUT||"")return k.issueFileCommand("OUTPUT",k.prepareKeyValueMessage(e,t));process.stdout.write(ar.EOL),C.issueCommand("set-output",{name:e},Y.toCommandValue(t))}f.setOutput=rs;function ns(e){C.issue("echo",e?"on":"off")}f.setCommandEcho=ns;function ss(e){process.exitCode=lr.Failure,cr(e)}f.setFailed=ss;function is(){return process.env.RUNNER_DEBUG==="1"}f.isDebug=is;function os(e){C.issueCommand("debug",{},e)}f.debug=os;function cr(e,t={}){C.issueCommand("error",Y.toCommandProperties(t),e instanceof Error?e.toString():e)}f.error=cr;function as(e,t={}){C.issueCommand("warning",Y.toCommandProperties(t),e instanceof Error?e.toString():e)}f.warning=as;function ls(e,t={}){C.issueCommand("notice",Y.toCommandProperties(t),e instanceof Error?e.toString():e)}f.notice=ls;function cs(e){process.stdout.write(e+ar.EOL)}f.info=cs;function ur(e){C.issue("group",e)}f.startGroup=ur;function fr(){C.issue("endgroup")}f.endGroup=fr;function us(e,t){return or(this,void 0,void 0,function*(){ur(e);let r;try{r=yield t()}finally{fr()}return r})}f.group=us;function fs(e,t){if(process.env.GITHUB_STATE||"")return k.issueFileCommand("STATE",k.prepareKeyValueMessage(e,t));C.issueCommand("save-state",{name:e},Y.toCommandValue(t))}f.saveState=fs;function ds(e){return process.env[`STATE_${e}`]||""}f.getState=ds;function hs(e){return or(this,void 0,void 0,function*(){return yield Yn.OidcClient.getIDToken(e)})}f.getIDToken=hs;var ps=ze();Object.defineProperty(f,"summary",{enumerable:!0,get:function(){return ps.summary}});var ms=ze();Object.defineProperty(f,"markdownSummary",{enumerable:!0,get:function(){return ms.markdownSummary}});var Ke=sr();Object.defineProperty(f,"toPosixPath",{enumerable:!0,get:function(){return Ke.toPosixPath}});Object.defineProperty(f,"toWin32Path",{enumerable:!0,get:function(){return Ke.toWin32Path}});Object.defineProperty(f,"toPlatformPath",{enumerable:!0,get:function(){return Ke.toPlatformPath}})});var Qe=m(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.DEFAULT_COLOR_MAP=void 0;Q.DEFAULT_COLOR_MAP={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",white_bold:"\x1B[01m",reset:"\x1B[0m"};var Ye=class{constructor(t=Q.DEFAULT_COLOR_MAP){this.text="",this.colorMap=t}addCharsWithColor(t,r){let n=this.colorMap[t];this.text+=n!==void 0?`${n}${r}${this.colorMap.reset}`:r}renderConsole(){return this.text}};Q.default=Ye});var se=m(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.DEFAULT_HEADER_ALIGNMENT=g.DEFAULT_ROW_ALIGNMENT=g.DEFAULT_HEADER_FONT_COLOR=g.DEFAULT_ROW_FONT_COLOR=g.COLORS=g.ALIGNMENTS=g.DEFAULT_TABLE_STYLE=g.DEFAULT_ROW_SEPARATOR=g.DEFAULT_COLUMN_LEN=void 0;g.DEFAULT_COLUMN_LEN=20;g.DEFAULT_ROW_SEPARATOR=!1;g.DEFAULT_TABLE_STYLE={headerTop:{left:"\u250C",mid:"\u252C",right:"\u2510",other:"\u2500"},headerBottom:{left:"\u251C",mid:"\u253C",right:"\u2524",other:"\u2500"},tableBottom:{left:"\u2514",mid:"\u2534",right:"\u2518",other:"\u2500"},vertical:"\u2502",rowSeparator:{left:"\u251C",mid:"\u253C",right:"\u2524",other:"\u2500"}};g.ALIGNMENTS=["right","left","center"];g.COLORS=["red","green","yellow","white","blue","magenta","cyan","white_bold","reset"];g.DEFAULT_ROW_FONT_COLOR="white";g.DEFAULT_HEADER_FONT_COLOR="white_bold";g.DEFAULT_ROW_ALIGNMENT="right";g.DEFAULT_HEADER_ALIGNMENT="center"});var Xe=m(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.rawColumnToInternalColumn=q.objIfExists=void 0;var _s=se(),xs=(e,t)=>t?{[e]:t}:{};q.objIfExists=xs;var gs=e=>{var t;return Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,title:(t=e.title)!==null&&t!==void 0?t:e.name},(0,q.objIfExists)("color",e.color)),(0,q.objIfExists)("maxLen",e.maxLen)),(0,q.objIfExists)("minLen",e.minLen)),{alignment:e.alignment||_s.DEFAULT_ROW_ALIGNMENT})};q.rawColumnToInternalColumn=gs});var dr=m(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});var vs=[{first:768,last:879},{first:1155,last:1158},{first:1160,last:1161},{first:1425,last:1469},{first:1471,last:1471},{first:1473,last:1474},{first:1476,last:1477},{first:1479,last:1479},{first:1536,last:1539},{first:1552,last:1557},{first:1611,last:1630},{first:1648,last:1648},{first:1750,last:1764},{first:1767,last:1768},{first:1770,last:1773},{first:1807,last:1807},{first:1809,last:1809},{first:1840,last:1866},{first:1958,last:1968},{first:2027,last:2035},{first:2305,last:2306},{first:2364,last:2364},{first:2369,last:2376},{first:2381,last:2381},{first:2385,last:2388},{first:2402,last:2403},{first:2433,last:2433},{first:2492,last:2492},{first:2497,last:2500},{first:2509,last:2509},{first:2530,last:2531},{first:2561,last:2562},{first:2620,last:2620},{first:2625,last:2626},{first:2631,last:2632},{first:2635,last:2637},{first:2672,last:2673},{first:2689,last:2690},{first:2748,last:2748},{first:2753,last:2757},{first:2759,last:2760},{first:2765,last:2765},{first:2786,last:2787},{first:2817,last:2817},{first:2876,last:2876},{first:2879,last:2879},{first:2881,last:2883},{first:2893,last:2893},{first:2902,last:2902},{first:2946,last:2946},{first:3008,last:3008},{first:3021,last:3021},{first:3134,last:3136},{first:3142,last:3144},{first:3146,last:3149},{first:3157,last:3158},{first:3260,last:3260},{first:3263,last:3263},{first:3270,last:3270},{first:3276,last:3277},{first:3298,last:3299},{first:3393,last:3395},{first:3405,last:3405},{first:3530,last:3530},{first:3538,last:3540},{first:3542,last:3542},{first:3633,last:3633},{first:3636,last:3642},{first:3655,last:3662},{first:3761,last:3761},{first:3764,last:3769},{first:3771,last:3772},{first:3784,last:3789},{first:3864,last:3865},{first:3893,last:3893},{first:3895,last:3895},{first:3897,last:3897},{first:3953,last:3966},{first:3968,last:3972},{first:3974,last:3975},{first:3984,last:3991},{first:3993,last:4028},{first:4038,last:4038},{first:4141,last:4144},{first:4146,last:4146},{first:4150,last:4151},{first:4153,last:4153},{first:4184,last:4185},{first:4448,last:4607},{first:4959,last:4959},{first:5906,last:5908},{first:5938,last:5940},{first:5970,last:5971},{first:6002,last:6003},{first:6068,last:6069},{first:6071,last:6077},{first:6086,last:6086},{first:6089,last:6099},{first:6109,last:6109},{first:6155,last:6157},{first:6313,last:6313},{first:6432,last:6434},{first:6439,last:6440},{first:6450,last:6450},{first:6457,last:6459},{first:6679,last:6680},{first:6912,last:6915},{first:6964,last:6964},{first:6966,last:6970},{first:6972,last:6972},{first:6978,last:6978},{first:7019,last:7027},{first:7616,last:7626},{first:7678,last:7679},{first:8203,last:8207},{first:8234,last:8238},{first:8288,last:8291},{first:8298,last:8303},{first:8400,last:8431},{first:12330,last:12335},{first:12441,last:12442},{first:43014,last:43014},{first:43019,last:43019},{first:43045,last:43046},{first:64286,last:64286},{first:65024,last:65039},{first:65056,last:65059},{first:65279,last:65279},{first:65529,last:65531},{first:68097,last:68099},{first:68101,last:68102},{first:68108,last:68111},{first:68152,last:68154},{first:68159,last:68159},{first:119143,last:119145},{first:119155,last:119170},{first:119173,last:119179},{first:119210,last:119213},{first:119362,last:119364},{first:917505,last:917505},{first:917536,last:917631},{first:917760,last:917999}];Ze.default=vs});var hr=m(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});var ws=(e,t,r)=>{let n=0,s,i=r;if(e<t[0].first||e>t[i].last)return 0;for(;i>=n;)if(s=Math.floor((n+i)/2),e>t[s].last)n=s+1;else if(e<t[s].first)i=s-1;else return 1;return 0};et.default=ws});var tt=m(ie=>{"use strict";var mr=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});var pr=mr(dr()),bs=mr(hr()),ys=e=>e===0?0:e<32||e>=127&&e<160?-1:bs.default(e,pr.default,pr.default.length-1)?0:1+ +(e>=4352&&(e<=4447||e===9001||e===9002||e>=11904&&e<=42191&&e!==12351||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65135||e>=65280&&e<=65376||e>=65504&&e<=65510||e>=131072&&e<=196605||e>=196608&&e<=262141));ie.default=ys});var _r=m(oe=>{"use strict";var Os=oe&&oe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});var Es=Os(tt()),Ts=e=>{let t=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r),s=Es.default(n);if(s<0)return-1;t+=s}return t};oe.default=Ts});var gr=m(B=>{"use strict";var xr=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0});B.wcswidth=B.wcwidth=void 0;var Rs=xr(_r());B.wcswidth=Rs.default;var As=xr(tt());B.wcwidth=As.default});var rt=m(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.findWidthInConsole=G.stripAnsi=void 0;var Cs=gr(),Ss=/\x1b\[\d{1,3}(;\d{1,3})*m/g,Ls=e=>e.replace(Ss,"");G.stripAnsi=Ls;var Ps=(e,t)=>{let r=0;return e=(0,G.stripAnsi)(e),t&&Object.entries(t).forEach(([n,s])=>{let i=new RegExp(n,"g");r+=(e.match(i)||[]).length*s,e=e.replace(n,"")}),r+=(0,Cs.wcswidth)(e),r};G.findWidthInConsole=Ps});var st=m(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.biggestWordInSentence=W.limitWidth=W.textWithPadding=void 0;var nt=rt(),Us=(e,t,r,n)=>{let s=(0,nt.findWidthInConsole)(e,n),i=Math.floor((r-s)/2),o=r-i-s;if(r<s)return e;switch(t){case"left":return e.concat(" ".repeat(r-s));case"center":return" ".repeat(i).concat(e).concat(" ".repeat(o));case"right":default:return" ".repeat(r-s).concat(e)}};W.textWithPadding=Us;var Ms=(e,t,r)=>{let n=[],s=e.split(" "),i=[],o=0;return s.forEach(l=>{let c=(0,nt.findWidthInConsole)(l,r);o+c<=t?(o+=c+1,i.push(l)):(n.push(i.join(" ")),i=[l],o=c+1)}),n.push(i.join(" ")),n};W.limitWidth=Ms;var Ds=(e,t)=>e.split(" ").reduce((r,n)=>Math.max(r,(0,nt.findWidthInConsole)(n,t)),0);W.biggestWordInSentence=Ds});var ae=m(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.getWidthLimitedColumnsArray=_.createHeaderAsRow=_.renderTableHorizontalBorders=_.findLenOfColumn=_.createRow=_.createColumFromComputedColumn=_.createColumFromOnlyName=_.createTableHorizontalBorders=_.convertRawRowOptionsToStandard=_.cellText=void 0;var it=Xe(),vr=rt(),ot=st(),Oe=se(),X=(e,t)=>Math.max(e,t),qs=e=>e==null?"":`${e}`;_.cellText=qs;var Ns=e=>{if(e)return{color:e.color,separator:e.separator||Oe.DEFAULT_ROW_SEPARATOR}};_.convertRawRowOptionsToStandard=Ns;var Is=({left:e,mid:t,right:r,other:n},s)=>{let i=e;return s.forEach(o=>{i+=n.repeat(o+2),i+=t}),i=i.slice(0,-t.length),i+=r,i};_.createTableHorizontalBorders=Is;var js=e=>({name:e,title:e});_.createColumFromOnlyName=js;var Fs=e=>{var t;return Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,title:(t=e.title)!==null&&t!==void 0?t:e.name},(0,it.objIfExists)("color",e.color)),(0,it.objIfExists)("maxLen",e.maxLen)),(0,it.objIfExists)("minLen",e.minLen)),{alignment:e.alignment||Oe.DEFAULT_ROW_ALIGNMENT})};_.createColumFromComputedColumn=Fs;var Bs=(e,t,r)=>({color:e,separator:r,text:t});_.createRow=Bs;var Ws=(e,t,r)=>{let n=e.name,s=e.title,i=X(0,e?.minLen||0);return e.maxLen?(i=X(i,X(e.maxLen,(0,ot.biggestWordInSentence)(s,r))),i=t.reduce((o,l)=>X(o,(0,ot.biggestWordInSentence)((0,_.cellText)(l.text[n]),r)),i),i):(i=X(i,(0,vr.findWidthInConsole)(s,r)),t.forEach(o=>{i=X(i,(0,vr.findWidthInConsole)((0,_.cellText)(o.text[n]),r))}),i)};_.findLenOfColumn=Ws;var $s=(e,t)=>(0,_.createTableHorizontalBorders)(e,t);_.renderTableHorizontalBorders=$s;var ks=(e,t)=>{let r=Oe.DEFAULT_HEADER_FONT_COLOR,n=e(r,{},!1);return t.forEach(s=>{n.text[s.name]=s.title}),n};_.createHeaderAsRow=ks;var Gs=(e,t,r)=>{let n={};return e.forEach(s=>{n[s.name]=(0,ot.limitWidth)((0,_.cellText)(t.text[s.name]),s.length||Oe.DEFAULT_COLUMN_LEN,r)}),n};_.getWidthLimitedColumnsArray=Gs});var wr=m(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.preProcessRows=Z.preProcessColumns=void 0;var Hs=ae(),Vs=e=>{e.computedColumns.length&&e.computedColumns.forEach(t=>{e.addColumn(t),e.rows.forEach(r=>{r.text[t.name]=t.function(r.text)})})},zs=e=>{e.enabledColumns.length&&(e.columns=e.columns.filter(t=>e.enabledColumns.includes(t.name)))},Js=e=>{e.disabledColumns.length&&(e.columns=e.columns.filter(t=>!e.disabledColumns.includes(t.name)))},Ks=e=>{e.columns.forEach(t=>{t.length=(0,Hs.findLenOfColumn)(t,e.rows,e.charLength)})},Ys=e=>{Vs(e),Js(e),zs(e),Ks(e)};Z.preProcessColumns=Ys;var Qs=e=>{let t=e.rows.filter(r=>e.filterFunction(r.text)).sort((r,n)=>e.sortFunction(r.text,n.text));e.rows=t};Z.preProcessRows=Qs});var at=m(S=>{"use strict";var yr=S&&S.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S,"__esModule",{value:!0});S.printSimpleTable=S.renderSimpleTable=S.renderTable=void 0;var Or=yr(Qe()),Er=st(),P=se(),$=ae(),Xs=yr(lt()),br=wr(),Zs=(e,t,r,n,s,i,o,l)=>{let c=new Or.default(o);return c.addCharsWithColor("",e.vertical),t.forEach(a=>{let d=r<n[a.name].length?(0,$.cellText)(n[a.name][r]):"";c.addCharsWithColor(P.DEFAULT_ROW_FONT_COLOR," "),c.addCharsWithColor(s&&P.DEFAULT_HEADER_FONT_COLOR||a.color||i.color,(0,Er.textWithPadding)(d,a.alignment||P.DEFAULT_ROW_ALIGNMENT,a.length||P.DEFAULT_COLUMN_LEN,l)),c.addCharsWithColor("",` ${e.vertical}`)}),c.renderConsole()},Tr=(e,t,r,n,s,i)=>{let o=(0,$.getWidthLimitedColumnsArray)(t,r,i),l=Object.values(o).reduce((a,u)=>Math.max(a,u.length),0),c=[];for(let a=0;a<l;a+=1){let u=Zs(e,t,a,o,s,r,n,i);c.push(u)}return c},ei=(e,t)=>{let r=[];return r=r.concat(Tr(e.tableStyle,e.columns,t,e.colorMap,void 0,e.charLength)),r},ti=e=>{let t=[];if(e.title===void 0)return t;let r=()=>{let i=(o,l)=>o+l+2+1;return e.columns.map(o=>o.length||P.DEFAULT_COLUMN_LEN).reduce(i,1)},n=(0,Er.textWithPadding)(e.title,P.DEFAULT_HEADER_ALIGNMENT,r()),s=new Or.default(e.colorMap);return s.addCharsWithColor(P.DEFAULT_HEADER_FONT_COLOR,n),t.push(s.renderConsole()),t},ri=e=>{let t=[];t.push((0,$.renderTableHorizontalBorders)(e.tableStyle.headerTop,e.columns.map(n=>n.length||P.DEFAULT_COLUMN_LEN)));let r=(0,$.createHeaderAsRow)($.createRow,e.columns);return t=t.concat(Tr(e.tableStyle,e.columns,r,e.colorMap,!0)),t.push((0,$.renderTableHorizontalBorders)(e.tableStyle.headerBottom,e.columns.map(n=>n.length||P.DEFAULT_COLUMN_LEN))),t},ni=e=>{let t=[];return t.push((0,$.renderTableHorizontalBorders)(e.tableStyle.tableBottom,e.columns.map(r=>r.length||P.DEFAULT_COLUMN_LEN))),t},si=(e,t)=>{let r=[],n=e.rows.length-1;return e.rows.indexOf(t)!==n&&t.separator&&r.push((0,$.renderTableHorizontalBorders)(e.tableStyle.rowSeparator,e.columns.map(i=>i.length||P.DEFAULT_COLUMN_LEN))),r},ii=e=>{(0,br.preProcessColumns)(e),(0,br.preProcessRows)(e);let t=[];return ti(e).forEach(r=>t.push(r)),ri(e).forEach(r=>t.push(r)),e.rows.forEach(r=>{ei(e,r).forEach(n=>t.push(n)),si(e,r).forEach(n=>t.push(n))}),ni(e).forEach(r=>t.push(r)),t.join(`
`)};S.renderTable=ii;var oi=e=>{let t=new Xs.default;return t.addRows(e),(0,S.renderTable)(t)};S.renderSimpleTable=oi;var ai=e=>{console.log((0,S.renderSimpleTable)(e))};S.printSimpleTable=ai});var lt=m(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});var li=Qe(),Ee=se(),Te=ae(),ci=Xe(),ui=at(),fi=()=>0,di=()=>!0,ct=class{initSimple(t){this.columns=t.map(r=>({name:r,title:r,alignment:Ee.DEFAULT_ROW_ALIGNMENT}))}initDetailed(t){var r;this.title=t?.title||this.title,this.tableStyle=t?.style||this.tableStyle,this.sortFunction=t?.sort||this.sortFunction,this.filterFunction=t?.filter||this.filterFunction,this.enabledColumns=t?.enabledColumns||this.enabledColumns,this.disabledColumns=t?.disabledColumns||this.disabledColumns,this.computedColumns=t?.computedColumns||this.computedColumns,this.columns=((r=t?.columns)===null||r===void 0?void 0:r.map(ci.rawColumnToInternalColumn))||this.columns,this.rowSeparator=t?.rowSeparator||this.rowSeparator,this.charLength=t?.charLength||this.charLength,t?.colorMap&&(this.colorMap=Object.assign(Object.assign({},this.colorMap),t.colorMap)),t.rows!==void 0&&this.addRows(t.rows)}constructor(t){this.rows=[],this.columns=[],this.title=void 0,this.tableStyle=Ee.DEFAULT_TABLE_STYLE,this.filterFunction=di,this.sortFunction=fi,this.enabledColumns=[],this.disabledColumns=[],this.computedColumns=[],this.rowSeparator=Ee.DEFAULT_ROW_SEPARATOR,this.colorMap=li.DEFAULT_COLOR_MAP,this.charLength={},t instanceof Array?this.initSimple(t):typeof t=="object"&&this.initDetailed(t)}createColumnFromRow(t){let r=this.columns.map(n=>n.name);Object.keys(t).forEach(n=>{r.includes(n)||this.columns.push((0,Te.createColumFromOnlyName)(n))})}addColumn(t){typeof t=="string"?this.columns.push((0,Te.createColumFromOnlyName)(t)):this.columns.push((0,Te.createColumFromComputedColumn)(t))}addColumns(t){t.forEach(r=>{this.addColumn(r)})}addRow(t,r){this.createColumnFromRow(t),this.rows.push((0,Te.createRow)(r?.color||Ee.DEFAULT_ROW_FONT_COLOR,t,r?.separator!==void 0?r?.separator:this.rowSeparator))}addRows(t,r){t.forEach(n=>{this.addRow(n,r)})}renderTable(){return(0,ui.renderTable)(this)}};ut.default=ct});var Ar=m(le=>{"use strict";var hi=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(le,"__esModule",{value:!0});var pi=hi(lt()),Rr=ae(),ft=class{constructor(t){this.table=new pi.default(t)}addColumn(t){return this.table.addColumn(t),this}addColumns(t){return this.table.addColumns(t),this}addRow(t,r){return this.table.addRow(t,(0,Rr.convertRawRowOptionsToStandard)(r)),this}addRows(t,r){return this.table.addRows(t,(0,Rr.convertRawRowOptionsToStandard)(r)),this}printTable(){let t=this.table.renderTable();console.log(t)}render(){return this.table.renderTable()}};le.default=ft});var Sr=m(M=>{"use strict";var mi=M&&M.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M,"__esModule",{value:!0});M.renderTable=M.printTable=M.Table=void 0;var _i=mi(Ar());M.Table=_i.default;var Cr=at();Object.defineProperty(M,"printTable",{enumerable:!0,get:function(){return Cr.printSimpleTable}});Object.defineProperty(M,"renderTable",{enumerable:!0,get:function(){return Cr.renderSimpleTable}})});var T=Re(ye(),1),dt=Re(Sr(),1);var ce=Re(ye(),1);import{spawn as xi}from"node:child_process";import{resolve as gi}from"node:path";import{cwd as vi}from"node:process";async function Lr(e){let t=xi("pnpm",["licenses","ls","--json"],{cwd:gi(vi(),e)}),r="";return t.stdout.on("data",n=>r+=n.toString()),await new Promise((n,s)=>{t.on("close",n),t.on("error",s)}),(0,ce.isDebug)()&&((0,ce.debug)("Licenses JSON"),(0,ce.debug)(r)),r.startsWith("{")?JSON.parse(r):{}}async function Pr(e,t,r){let n={success:!0,unusedIgnores:[],licensesUsed:{}},s=await Lr(e);n.licensesUsed=Object.fromEntries(Object.entries(s).map(([o,l])=>[o,new Set(l)]).sort((o,l)=>l[1].size-o[1].size));e:for(let o of r){for(let l of Object.keys(s))if(s[l].some(c=>c.name===o.name&&c.version===o.version))continue e;n.unusedIgnores.push(`${o.name}@${o.version}`)}for(let o of Object.keys(s))s[o]=s[o].filter(l=>![...r].some(c=>c.name===l.name&&c.version===l.version));let i=new Set(Object.keys(s).filter(o=>!t.has(o)).filter(o=>s[o].length>0));return i.size>0&&(n={...n,invalidLicenses:i,success:!1}),n}try{let e=((0,T.getInput)("directory",{required:!1,trimWhitespace:!0})||".").replaceAll("'",""),t=new Set((0,T.getMultilineInput)("allowed",{required:!1})??[]),r=new Set((0,T.getMultilineInput)("ignored",{required:!1}).map(s=>{if(!s.startsWith("@")){let[l,c,a]=s.split("@");return{name:`@${c}`,version:a}}let[i,o]=s.split("@");return{name:i,version:o}})),n=await Pr(e,t,r);if(n.success===!0){(0,T.info)("All licenses are valid");let s=new dt.Table({columns:[{alignment:"left",name:"license",title:"License"},{alignment:"right",name:"packages",title:"Count"}]});s.addRows(n.licensesUsed),(0,T.info)(s.render())}else{(0,T.setFailed)("Invalid licenses found");for(let s of n.invalidLicenses){(0,T.warning)(`Invalid license ${s}`);let i=new dt.Table({columns:[{alignment:"left",name:"name",title:"Name"},{alignment:"left",name:"version",title:"Version"},{alignment:"left",name:"license",title:"License"},{alignment:"left",name:"homepage",title:"Homepage"}]});i.addRows([...n.licensesUsed[s]].map(o=>({name:o.name,version:o.version,license:o.license,homepage:o.homepage}))),(0,T.info)(i.render())}}}catch(e){(0,T.setFailed)(e.message)}
